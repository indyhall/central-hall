<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Log into Indy</title>
    <link href="captiveportal-bootstrap.min.css" rel="stylesheet" />
    <style>
      .container {
        margin-top: 60px;
      }
      .row {
        margin-bottom: 25px;
      }
      .tab-pane {
        padding: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row logo-row">
        <div class="col-xs-6 col-xs-offset-3 col-sm-4 col-sm-offset-4 col-md-2 col-md-offset-5"><img src="captiveportal-indy-hall.png" class="img-responsive" /></div>
      </div>
      <div class="row terms-row">
        <div class="col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 intro">
          <p><strong>Welcome to Indy Hall!</strong> Because this is your first time on the network with this device,
            we need you to quickly log in.  Before you do, though, read through these guidelines:</p>
          <ul>
            <li>No torrenting!</li>
            <li>Try to be mindful of large downloads and uploads.</li>
            <li>Watch out for Dropbox, Google Drive, Backblaze and others taking up bandwidth in the background.</li>
          </ul>
          <p>Got it?  OK, let's get you online:</p>
        </div>
      </div>
      <div class="row form-row">
        <div class="col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 login">
          <ul class="nav nav-tabs" role="tablist">
            <li class="active"><a href="#existing" role="tab" data-toggle="tab"><span class="glyphicon glyphicon-user"></span> Existing Members</a></li>
            <li><a href="#guests" role="tab" data-toggle="tab">Guests</a></li>
          </ul>
          <div class="tab-content">
            <!-- Existing members -->
            <div class="tab-pane active" id="existing">
              <form role="form">
                <div class="form-group">
                  <label for="email">Your Email Address</label>
                  <input type="email" class="form-control" id="email" />
                </div>
                <div class="form-group">
                  <label for="password">Password</label>
                  <input type="password" class="form-control" id="password" />
                </div>
                <div class="form-group">
                  <label for="device-name">Name This Device (i.e. Macbook or iPhone)</label>
                  <input type="text" class="form-control" id="device-name" />
                </div>
                <button id="login" class="btn btn-primary">Log In <span class="glyphicon glyphicon-chevron-right"></span></button>
                <a class="btn btn-link" href="http://hello.indyhall.org/">Forgot your password?</a>
              </form>
            </div>
            <!-- Guests -->
            <div class="tab-pane" id="guests">
              <form role="form">
                <div class="form-group">
                  <label for="pin">Today's Guest Password</label>
                  <input type="password" class="form-control" id="guest-password" />
                </div>
                <div class="form-group">
                  <label for="name">Your Full Name</label>
                  <input type="text" class="form-control" id="name" />
                </div>
                <div class="form-group">
                  <label for="name">I'm a Guest Of (optional)</label>
                  <input type="text" class="form-control" id="sponsor-name" />
                </div>
                <button id="guest-login" class="btn btn-primary">Log In As a Guest <span class="glyphicon glyphicon-chevron-right"></span></button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <input type="hidden" id="mac" value="$CLIENT_MAC$" />

      <!-- Progress Modal -->
      <div class="modal fade" id="progress-modal" tabindex="-1" role="dialog" aria-labelledby="progress-title" aria-hidden="true" data-keyboard="false" data-backdrop="static">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="progress-title">Connecting…</h4>
            </div>
            <div class="modal-body">
              <div class="progress">
                <div class="progress-bar progress-bar-striped active"  style="width: 100%">
                  <span class="sr-only">Please wait.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <h2 style="margin-top: 200px;">Debug:</h2>
      <table class="table">
        <tr>
          <td>MAC Address</td>
          <td>$CLIENT_MAC$</td>
        </tr>
        <tr>
          <td>Portal Zone</td>
          <td>$PORTAL_ZONE$</td>
        </tr>
        <tr>
          <td>Redirect URL</td>
          <td>$PORTAL_REDIRURL$</td>
        </tr>
        <tr>
          <td>Message</td>
          <td>$PORTAL_MESSAGE$</td>
        </tr>
        <tr>
          <td>Client IP</td>
          <td>$CLIENT_IP$</td>
        </tr>
        <tr>
          <td>Portal Action</td>
          <td>$PORTAL_ACTION$</td>
        </tr>
      </table>
    </div>
    <script src="captiveportal-jquery-2.1.1.min.js"></script>
    <script src="captiveportal-bootstrap.min.js"></script>
    <script>
    $(function() {
      $('#login').click(function(e) {
        e.preventDefault();
        $(this).html('<span class="glyphicon glyphicon-refresh spin"></span> Connecting…').attr('disabled', 'disabled');
        $('.form-row').animate({ opacity: 0.5 }, 800, function() {
          // $('#progress-modal').modal('show');
        });
        return false;
      });
      $('#email, #password').keyup(function(e) {
        var code = e.keyCode || e.which;
        if (13 === code) {
          $('#login').trigger('click');
        }
      });
    });
    </script>
  </body>
</html>